<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StudyPro | Practice Tests</title>
  <style>
    /* Base Styles */
    :root {
      --primary: #8a7dff;
      --secondary: #3d5afe;
      --dark-bg: #121212;
      --card-bg: #1e1e1e;
      --text: #e0e0e0;
      --text-light: #aaaaaa;
      --accent: #4e92ff;
      --success: #4ecca3;
      --error: #ff6b6b;
      --neutral: #7f8c8d;
      --border: #333333;
      --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    }
    
    body {
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
      background-color: var(--dark-bg);
      color: var(--text);
      line-height: 1.6;
    }
    
    * {
      box-sizing: border-box;
    }
    
    h1, h2, h3, h4 {
      margin: 0;
      font-weight: 600;
      color: var(--text);
    }
    
    a {
      text-decoration: none;
      color: inherit;
    }
    
    /* Layout */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    .main-content {
      padding: 30px 0;
      min-height: calc(100vh - 160px);
    }
    
    /* Header */
    header {
      background-color: var(--card-bg);
      padding: 15px 0;
      box-shadow: var(--shadow);
    }
    
    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      font-size: 24px;
      font-weight: 700;
      color: var(--primary);
    }
    
    .nav-links {
      display: flex;
      gap: 25px;
      color: var(--text-light);
    }
    
    .nav-links a:hover {
      color: var(--primary);
    }
    
    .user-profile {
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--text);
    }
    
    .avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background-color: var(--secondary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      color: white;
    }
    
    /* Dashboard */
    .welcome-banner {
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: var(--shadow);
    }
    
    .welcome-text h1 {
      color: var(--text);
    }
    
    .welcome-text p {
      margin-top: 5px;
      color: var(--text-light);
    }
    
    .daily-challenge {
      color: var(--primary);
    }
    
    .quick-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background-color: var(--card-bg);
      border-radius: 10px;
      padding: 20px;
      transition: transform 0.3s ease;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    
    .stat-card:hover {
      transform: translateY(-5px);
      border-color: var(--primary);
    }
    
    .stat-card h3 {
      color: var(--text);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .stat-value {
      font-size: 28px;
      font-weight: 700;
      color: var(--primary);
    }
    
    .stat-label {
      color: var(--text-light);
      font-size: 14px;
    }
    
    .primary-actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }
    
    .action-card {
      background-color: var(--card-bg);
      border-radius: 10px;
      padding: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    
    .action-card.primary {
      background-color: var(--secondary);
      color: white;
    }
    
    .action-card.primary h3 {
      color: white;
    }
    
    .action-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
      border-color: var(--primary);
    }
    
    .action-icon {
      font-size: 32px;
      margin-bottom: 15px;
      color: var(--primary);
    }
    
    .action-card.primary .action-icon {
      color: white;
    }
    
    /* Test Selection */
    .test-selection {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .selection-heading {
      margin-bottom: 30px;
      text-align: center;
    }
    
    .selection-heading h2 {
      color: var(--text);
      font-size: 32px;
      margin-bottom: 10px;
    }
    
    .test-types {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }
    
    .test-type-card {
      background-color: var(--card-bg);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    
    .test-type-card:hover, .test-type-card.active {
      background-color: var(--secondary);
      transform: scale(1.05);
      color: white;
    }
    
    .test-type-card.active {
      border: 2px solid var(--primary);
    }
    
    .test-type-card.active h3,
    .test-type-card:hover h3 {
      color: white;
    }
    
    .test-settings {
      background-color: var(--card-bg);
      border-radius: 10px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    
    .settings-row {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .settings-group {
      flex: 1;
      min-width: 250px;
    }
    
    .settings-group label {
      display: block;
      margin-bottom: 10px;
      font-weight: 500;
      color: var(--text);
    }
    
    .toggle-group {
      display: flex;
      background-color: var(--dark-bg);
      border-radius: 25px;
      overflow: hidden;
      border: 1px solid var(--border);
    }
    
    .toggle-option {
      flex: 1;
      text-align: center;
      padding: 10px;
      cursor: pointer;
      color: var(--text-light);
    }
    
    .toggle-option.active {
      background-color: var(--secondary);
      color: white;
    }
    
    select {
      width: 100%;
      padding: 12px 15px;
      border-radius: 8px;
      background-color: var(--dark-bg);
      border: 1px solid var(--border);
      color: var(--text);
      font-size: 16px;
    }
    
    .action-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 40px;
    }
    
    .btn {
      padding: 12px 25px;
      border-radius: 8px;
      border: none;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .btn-primary {
      background-color: var(--primary);
      color: white;
    }
    
    .btn-secondary {
      background-color: var(--secondary);
      color: white;
    }
    
    .btn-outline {
      background-color: transparent;
      border: 2px solid var(--primary);
      color: var(--primary);
    }
    
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    /* Test Session */
    .test-session {
      max-width: 900px;
      margin: 0 auto;
    }
    
    .progress-bar-container {
      background-color: var(--card-bg);
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    
    .progress-info {
      display: flex;
      align-items: center;
      gap: 20px;
      flex: 1;
    }
    
    .progress-bar {
      flex: 1;
      height: 10px;
      background-color: var(--dark-bg);
      border-radius: 10px;
      overflow: hidden;
      position: relative;
    }
    
    .progress-fill {
      position: absolute;
      height: 100%;
      background-color: var(--primary);
      width: 35%;
    }
    
    .timer {
      font-size: 18px;
      font-weight: 600;
      color: var(--text);
    }
    
    .question-card {
      background-color: var(--card-bg);
      border-radius: 10px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    
    .question-number {
      color: var(--primary);
      font-size: 18px;
      margin-bottom: 15px;
    }
    
    .question-text {
      font-size: 20px;
      margin-bottom: 30px;
      color: var(--text);
    }
    
    .answer-options {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .answer-option {
      background-color: var(--dark-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .answer-option:hover {
      border: 1px solid var(--primary);
    }
    
    .answer-option.selected {
      border: 1px solid var(--primary);
      background-color: rgba(138, 125, 255, 0.2);
    }
    
    .question-actions {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
    }
    
    .action-group {
      display: flex;
      gap: 15px;
    }
    
    /* Results Page */
    .results-container {
      max-width: 900px;
      margin: 0 auto;
    }
    
    .results-header {
      text-align: center;
      margin-bottom: 40px;
    }
    
    .results-header h2 {
      color: var(--text);
      font-size: 32px;
      margin-bottom: 10px;
    }
    
    .score-summary {
      background-color: var(--card-bg);
      border-radius: 10px;
      padding: 30px;
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 40px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    
    .score-item {
      text-align: center;
      min-width: 150px;
    }
    
    .score-value {
      font-size: 38px;
      font-weight: 700;
      color: var(--primary);
    }
    
    .score-label {
      color: var(--text-light);
    }
    
    .performance-chart {
      background-color: var(--card-bg);
      border-radius: 10px;
      padding: 30px;
      margin-bottom: 40px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    
    .chart-container {
      height: 300px;
      margin-top: 20px;
      position: relative;
    }
    
    .chart-bar {
      position: absolute;
      bottom: 0;
      width: 60px;
      border-radius: 5px 5px 0 0;
      transition: height 1s ease;
    }
    
    .chart-bar:nth-child(1) {
      left: 10%;
      height: 65%;
      background-color: var(--primary);
    }
    
    .chart-bar:nth-child(2) {
      left: 30%;
      height: 45%;
      background-color: var(--accent);
    }
    
    .chart-bar:nth-child(3) {
      left: 50%;
      height: 80%;
      background-color: var(--success);
    }
    
    .chart-bar:nth-child(4) {
      left: 70%;
      height: 30%;
      background-color: var(--neutral);
    }
    
    .chart-labels {
      display: flex;
      justify-content: space-around;
      margin-top: 10px;
    }
    
    .chart-label {
      text-align: center;
      font-size: 14px;
      color: var(--text-light);
    }
    
    .review-section {
      background-color: var(--card-bg);
      border-radius: 10px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    
    .review-heading {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .review-item {
      background-color: var(--dark-bg);
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 15px;
    }
    
    .review-question {
      margin-bottom: 15px;
      font-weight: 500;
      color: var(--text);
    }
    
    .review-answers {
      display: flex;
      justify-content: space-between;
      gap: 20px;
      margin-bottom: 15px;
    }
    
    .answer-column {
      flex: 1;
    }
    
    .answer-header {
      font-size: 14px;
      color: var(--text-light);
      margin-bottom: 5px;
    }
    
    .your-answer {
      color: var(--error);
    }
    
    .correct-answer {
      color: var(--success);
    }
    
    .answer-explanation {
      background-color: rgba(44, 62, 80, 0.15);
      border-radius: 8px;
      padding: 15px;
      font-size: 14px;
      position: relative;
      color: var(--text-light);
    }
    
    .answer-explanation::before {
      content: "Explanation";
      position: absolute;
      top: -10px;
      left: 15px;
      background-color: var(--secondary);
      padding: 0 10px;
      border-radius: 4px;
      font-size: 12px;
      color: white;
    }

    /* Responsive styles */
    @media (max-width: 768px) {
      .welcome-banner {
        flex-direction: column;
        text-align: center;
      }
      
      .daily-challenge {
        margin-top: 15px;
      }
      
      .review-answers {
        flex-direction: column;
      }
      
      .nav-links {
        display: none;
      }
    }
  </style>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Header Section -->
  <header>
    <div class="container">
      <nav>
        <a href="#" class="logo">StudyPro</a>
        <div class="nav-links">
          <a href="#">Dashboard</a>
          <a href="#">Tests</a>
          <a href="#">Analytics</a>
          <a href="#">Resources</a>
        </div>
        <div class="user-profile">
          <span>Alex Johnson</span>
          <div class="avatar">AJ</div>
        </div>
      </nav>
    </div>
  </header>

  <!-- Dashboard Page -->
  <section class="main-content dashboard" id="dashboard">
    <div class="container">
      <div class="welcome-banner">
        <div class="welcome-text">
          <h1>Hey Alex, ready to crush your goals today?</h1>
          <p>You're making great progress! Keep up the momentum.</p>
        </div>
        <div class="daily-challenge">
          <p><i class="fas fa-fire"></i> 5-day streak! Take today's 5-min challenge.</p>
        </div>
      </div>

      <div class="quick-stats">
        <div class="stat-card">
          <h3><i class="fas fa-calendar-alt"></i> Upcoming Test Date</h3>
          <div class="stat-value">28</div>
          <div class="stat-label">Days Remaining</div>
        </div>
        <div class="stat-card">
          <h3><i class="fas fa-chart-line"></i> Study Plan Progress</h3>
          <div class="stat-value">65%</div>
          <div class="stat-label">Completion Rate</div>
        </div>
        <div class="stat-card">
          <h3><i class="fas fa-bullseye"></i> Last Practice Test Score</h3>
          <div class="stat-value">82%</div>
          <div class="stat-label">Above Average</div>
        </div>
      </div>

      <div class="primary-actions">
        <div class="action-card primary" onclick="showSection('test-selection')">
          <div class="action-icon"><i class="fas fa-edit"></i></div>
          <h3>Take Practice Test</h3>
          <p>Challenge yourself with a new practice test</p>
        </div>
        <div class="action-card">
          <div class="action-icon"><i class="fas fa-tasks"></i></div>
          <h3>View Study Plan</h3>
          <p>Check your personalized study schedule</p>
        </div>
        <div class="action-card">
          <div class="action-icon"><i class="fas fa-lightbulb"></i></div>
          <h3>Assessment Results</h3>
          <p>Review your diagnostic assessment</p>
        </div>
        <div class="action-card">
          <div class="action-icon"><i class="fas fa-chart-pie"></i></div>
          <h3>Progress Analytics</h3>
          <p>Visualize your performance data</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Test Selection Page -->
  <section class="main-content test-selection" id="test-selection" style="display: none;">
    <div class="container">
      <div class="selection-heading">
        <h2>Select Your Practice Test</h2>
        <p>Choose the test type and subject you want to practice</p>
      </div>

      <div class="test-types">
        <div class="test-type-card active">
          <h3>SAT</h3>
          <p>College Admissions</p>
        </div>
        <div class="test-type-card">
          <h3>ACT</h3>
          <p>College Admissions</p>
        </div>
      </div>

      <div class="test-settings">
        <div class="settings-row">
          <div class="settings-group">
            <label>Subject</label>
            <select>
              <option>Reading</option>
              <option>Writing</option>
              <option>Math - No Calculator</option>
              <option>Math - Calculator</option>
              <option>Full Test</option>
            </select>
          </div>
          <div class="settings-group">
            <label>Difficulty</label>
            <select>
              <option>Easy</option>
              <option selected>Medium</option>
              <option>Hard</option>
              <option>Mixed</option>
            </select>
          </div>
        </div>

        <div class="settings-row">
          <div class="settings-group">
            <label>Mode</label>
            <div class="toggle-group">
              <div class="toggle-option active">⏲️ Timed</div>
              <div class="toggle-option">🕒 Untimed</div>
            </div>
          </div>
          <div class="settings-group">
            <label>Question Count</label>
            <select>
              <option>10 Questions</option>
              <option selected>20 Questions</option>
              <option>Full Section</option>
            </select>
          </div>
        </div>
      </div>

      <div class="action-buttons">
        <button class="btn btn-outline" onclick="showSection('dashboard')">Back to Dashboard</button>
        <button class="btn btn-primary" onclick="showSection('test-session')">Start Test</button>
      </div>
    </div>
  </section>

  <!-- Test Session Page -->
  <section class="main-content test-session" id="test-session" style="display: none;">
    <div class="container">
      <div class="progress-bar-container">
        <div class="progress-info">
          <span>Question 7 of 20</span>
          <div class="progress-bar">
            <div class="progress-fill"></div>
          </div>
        </div>
        <div class="timer">
          <i class="fas fa-clock"></i> 32:45
        </div>
      </div>

      <div class="question-card">
        <div class="question-number">Question 7</div>
        <div class="question-text">
          The author's primary purpose in the passage is to:
        </div>
        <div class="answer-options">
          <div class="answer-option">
            A. argue that environmental regulations are too strict and hamper economic growth
          </div>
          <div class="answer-option selected">
            B. explain how recent environmental policies have affected urban development
          </div>
          <div class="answer-option">
            C. compare different approaches to environmental conservation across regions
          </div>
          <div class="answer-option">
            D. analyze the historical context of environmental activism in the United States
          </div>
        </div>

        <div class="question-actions">
          <div class="action-group">
            <button class="btn btn-outline">
              <i class="fas fa-flag"></i> Flag
            </button>
            <button class="btn btn-outline">
              <i class="fas fa-share"></i> Skip
            </button>
          </div>
          <div class="action-group">
            <button class="btn btn-secondary" onclick="showSection('test-selection')">
              <i class="fas fa-pause"></i> Pause Test
            </button>
            <button class="btn btn-primary">
              Next <i class="fas fa-arrow-right"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="action-buttons">
        <button class="btn btn-primary" onclick="showSection('results')">Submit Test</button>
      </div>
    </div>
  </section>

  <!-- Results Page -->
  <section class="main-content results" id="results" style="display: none;">
    <div class="container results-container">
      <div class="results-header">
        <h2>Test Results</h2>
        <p>SAT Reading Practice Test - 04/15/2025</p>
      </div>

      <div class="score-summary">
        <div class="score-item">
          <div class="score-value">82%</div>
          <div class="score-label">Correct Answers</div>
        </div>
        <div class="score-item">
          <div class="score-value">28:12</div>
          <div class="score-label">Time Taken</div>
        </div>
        <div class="score-item">
          <div class="score-value">+8%</div>
          <div class="score-label">Improvement</div>
        </div>
      </div>

      <div class="performance-chart">
        <h3>Performance by Topic</h3>
        <div class="chart-container">
          <div class="chart-bar"></div>
          <div class="chart-bar"></div>
          <div class="chart-bar"></div>
          <div class="chart-bar"></div>
        </div>
        <div class="chart-labels">
          <div class="chart-label">Main Idea<br>(65%)</div>
          <div class="chart-label">Vocabulary<br>(45%)</div>
          <div class="chart-label">Rhetoric<br>(80%)</div>
          <div class="chart-label">Details<br>(30%)</div>
        </div>
      </div>

      <div class="review-section">
        <div class="review-heading">
          <h3>Question Review</h3>
          <span>16/20 Correct</span>
        </div>

        <div class="review-item">
          <div class="review-question">
            <strong>Question 7:</strong> The author's primary purpose in the passage is to:
          </div>
          <div class="review-answers">
            <div class="answer-column">
              <div class="answer-header">Your Answer</div>
              <div class="your-answer">B. explain how recent environmental policies have affected urban development</div>
            </div>
            <div class="answer-column">
              <div class="answer-header">Correct Answer</div>
              <div class="correct-answer">C. compare different approaches to environmental conservation across regions</div>
            </div>
          </div>
          <div class="answer-explanation">
            While the passage does discuss environmental policies and urban development, its primary purpose is to compare how different regions have approached environmental conservation. The author specifically contrasts approaches in coastal areas, the Midwest, and mountainous regions.
          </div>
        </div>

        <div class="review-item">
          <div class="review-question">
            <strong>Question 8:</strong> According to the passage, which factor most influenced the shift in environmental policy during the 1990s?
          </div>
          <div class="review-answers">
            <div class="answer-column">
              <div class="answer-header">Your Answer</div>
              <div class="correct-answer">D. emerging research on climate change impacts</div>
            </div>
            <div class="answer-column">
              <div class="answer-header">Correct Answer</div>
              <div class="correct-answer">D. emerging research on climate change impacts</div>
            </div>
          </div>
          <div class="answer-explanation">
            The passage directly states that "By the mid-1990s, emerging research on climate change significantly altered the landscape of environmental policy." This research was the primary catalyst for the policy shifts discussed in the subsequent paragraphs.
          </div>
        </div>
      </div>

      <div class="action-buttons">
        <button class="btn btn-outline" onclick="showSection('dashboard')">Back to Dashboard</button>
        <button class="btn btn-primary" onclick="showSection('test-selection')">Take Another Test</button>
      </div>
    </div>
  </section>

  <script>
    function showSection(sectionId) {
  // Hide all sections
  document.getElementById('dashboard').style.display = 'none';
  document.getElementById('test-selection').style.display = 'none';
  document.getElementById('test-session').style.display = 'none';
  document.getElementById('results').style.display = 'none';
  
  // Show the selected section
  document.getElementById(sectionId).style.display = 'block';
}

// Event listeners for toggle options
document.addEventListener('DOMContentLoaded', function() {
  // Toggle options for Mode selection
  const toggleOptions = document.querySelectorAll('.toggle-option');
  toggleOptions.forEach(option => {
    option.addEventListener('click', function() {
      // Remove active class from all options in the same group
      const parent = this.parentNode;
      parent.querySelectorAll('.toggle-option').forEach(opt => {
        opt.classList.remove('active');
      });
      // Add active class to clicked option
      this.classList.add('active');
    });
  });
  
  // Test type card selection
  const testTypeCards = document.querySelectorAll('.test-type-card');
  testTypeCards.forEach(card => {
    card.addEventListener('click', function() {
      // Remove active class from all cards
      testTypeCards.forEach(c => c.classList.remove('active'));
      // Add active class to clicked card
      this.classList.add('active');
    });
  });
  
  // Answer option selection
  const answerOptions = document.querySelectorAll('.answer-option');
  answerOptions.forEach(option => {
    option.addEventListener('click', function() {
      // Remove selected class from all options
      answerOptions.forEach(opt => opt.classList.remove('selected'));
      // Add selected class to clicked option
      this.classList.add('selected');
    });
  });
});
// Main Application Logic for StudyPro
document.addEventListener('DOMContentLoaded', function() {
  // Initialize the application
  initApp();
  
  // Set up event listeners
  setupEventListeners();
});

// Application initialization
function initApp() {
  // Show dashboard by default
  showSection('dashboard');
  
  // Initialize timer values
  window.testTimer = {
    minutes: 35,
    seconds: 0,
    interval: null,
    paused: false
  };
  
  // Initialize test data
  window.testData = {
    currentQuestion: 1,
    totalQuestions: 20,
    answers: {},
    startTime: null,
    endTime: null,
    testType: 'SAT',
    subject: 'Reading',
    difficulty: 'Medium',
    mode: 'timed',
    questionCount: 20
  };
}

// Set up all event listeners
function setupEventListeners() {
  // Navigation links
  setupNavigation();
  
  // Toggle options (timed/untimed, etc.)
  setupToggleOptions();
  
  // Test type selection (SAT, ACT, etc.)
  setupTestTypeSelection();
  
  // Test settings changes
  setupSettingsChanges();
  
  // Answer selection
  setupAnswerSelection();
  
  // Button actions
  setupButtonActions();
}

// Navigation setup
function setupNavigation() {
  const navLinks = document.querySelectorAll('.nav-links a');
  navLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const target = this.textContent.toLowerCase();
      
      switch(target) {
        case 'dashboard':
          showSection('dashboard');
          break;
        case 'tests':
          showSection('test-selection');
          break;
        case 'analytics':
          // Implement analytics view
          alert('Analytics section coming soon!');
          break;
        case 'resources':
          // Implement resources view
          alert('Resources section coming soon!');
          break;
      }
    });
  });
}

// Toggle options setup
function setupToggleOptions() {
  const toggleOptions = document.querySelectorAll('.toggle-option');
  toggleOptions.forEach(option => {
    option.addEventListener('click', function() {
      // Remove active class from all options in the same group
      const parent = this.parentNode;
      parent.querySelectorAll('.toggle-option').forEach(opt => {
        opt.classList.remove('active');
      });
      // Add active class to clicked option
      this.classList.add('active');
      
      // Update test data based on selection
      if (this.textContent.includes('Timed')) {
        window.testData.mode = 'timed';
      } else if (this.textContent.includes('Untimed')) {
        window.testData.mode = 'untimed';
      }
    });
  });
}

// Test type selection setup
function setupTestTypeSelection() {
  const testTypeCards = document.querySelectorAll('.test-type-card');
  testTypeCards.forEach(card => {
    card.addEventListener('click', function() {
      // Remember current selection
      testTypeCards.forEach(c => c.classList.remove('active'));
      // Add active class to clicked card
      this.classList.add('active');
      
      // Update test data
      window.testData.testType = this.querySelector('h3').textContent;
      
      // Update available subjects based on test type
      updateSubjects(window.testData.testType);
    });
  });
}

// Update subjects dropdown based on test type
function updateSubjects(testType) {
  const subjectSelect = document.querySelector('select:first-of-type');
  subjectSelect.innerHTML = ''; // Clear existing options
  
  let subjects = [];
  
  switch(testType) {
    case 'SAT':
      subjects = ['Reading', 'Writing', 'Math - No Calculator', 'Math - Calculator', 'Full Test'];
      break;
    case 'ACT':
      subjects = ['English', 'Math', 'Reading', 'Science', 'Full Test'];
      break;
    case 'GRE':
      subjects = ['Verbal Reasoning', 'Quantitative Reasoning', 'Analytical Writing', 'Full Test'];
      break;
    case 'GMAT':
      subjects = ['Verbal', 'Quantitative', 'Integrated Reasoning', 'Full Test'];
      break;
    case 'LSAT':
      subjects = ['Logical Reasoning', 'Analytical Reasoning', 'Reading Comprehension', 'Full Test'];
      break;
    case 'MCAT':
      subjects = ['Chemical and Physical Foundations', 'Critical Analysis and Reasoning', 
                 'Biological and Biochemical Foundations', 'Psychological and Social Foundations', 'Full Test'];
      break;
    default:
      subjects = ['Reading', 'Writing', 'Math - No Calculator', 'Math - Calculator', 'Full Test'];
  }
  
  // Add options to the select element
  subjects.forEach(subject => {
    const option = document.createElement('option');
    option.textContent = subject;
    subjectSelect.appendChild(option);
  });
  
  // Update testData
  window.testData.subject = subjects[0];
}

// Settings changes setup
function setupSettingsChanges() {
  // Subject selection
  const subjectSelect = document.querySelector('.settings-row:first-child select:first-child');
  subjectSelect.addEventListener('change', function() {
    window.testData.subject = this.value;
  });
  
  // Difficulty selection
  const difficultySelect = document.querySelector('.settings-row:first-child select:last-child');
  difficultySelect.addEventListener('change', function() {
    window.testData.difficulty = this.value;
  });
  
  // Question count selection
  const questionCountSelect = document.querySelector('.settings-row:last-child select');
  questionCountSelect.addEventListener('change', function() {
    const countText = this.value;
    if (countText.includes('10')) {
      window.testData.questionCount = 10;
    } else if (countText.includes('20')) {
      window.testData.questionCount = 20;
    } else {
      // Full section - varies by test type and subject
      const counts = {
        'SAT': {'Reading': 52, 'Writing': 44, 'Math - No Calculator': 20, 'Math - Calculator': 38},
        'ACT': {'English': 75, 'Math': 60, 'Reading': 40, 'Science': 40},
        'GRE': {'Verbal Reasoning': 40, 'Quantitative Reasoning': 40},
        'GMAT': {'Verbal': 36, 'Quantitative': 31, 'Integrated Reasoning': 12},
        'LSAT': {'Logical Reasoning': 50, 'Analytical Reasoning': 23, 'Reading Comprehension': 27},
        'MCAT': {'Full Test': 230}
      };
      
      try {
        window.testData.questionCount = counts[window.testData.testType][window.testData.subject] || 50;
      } catch (e) {
        window.testData.questionCount = 50; // Default if not found
      }
    }
    
    // Update test session interface
    updateTestSessionUI();
  });
}

// Update test session UI based on settings
function updateTestSessionUI() {
  const progressText = document.querySelector('.progress-info span');
  if (progressText) {
    progressText.textContent = `Question ${window.testData.currentQuestion} of ${window.testData.questionCount}`;
  }
  
  const progressFill = document.querySelector('.progress-fill');
  if (progressFill) {
    const progressPercentage = (window.testData.currentQuestion / window.testData.questionCount) * 100;
    progressFill.style.width = `${progressPercentage}%`;
  }
  
  const questionNumber = document.querySelector('.question-number');
  if (questionNumber) {
    questionNumber.textContent = `Question ${window.testData.currentQuestion}`;
  }
}

// Setup answer selection
function setupAnswerSelection() {
  // Use event delegation for answer options (since they can change)
  document.addEventListener('click', function(e) {
    if (e.target.classList.contains('answer-option') || e.target.closest('.answer-option')) {
      const option = e.target.classList.contains('answer-option') ? e.target : e.target.closest('.answer-option');
      const allOptions = document.querySelectorAll('.answer-option');
      
      // Remove selected class from all options
      allOptions.forEach(opt => opt.classList.remove('selected'));
      
      // Add selected class to clicked option
      option.classList.add('selected');
      
      // Store the answer
      const optionText = option.textContent.trim();
      const optionLetter = optionText.charAt(0);
      window.testData.answers[window.testData.currentQuestion] = optionLetter;
    }
  });
}

// Setup button actions
function setupButtonActions() {
  // Action cards
  const actionCards = document.querySelectorAll('.action-card');
  actionCards.forEach(card => {
    card.addEventListener('click', function() {
      const cardTitle = this.querySelector('h3').textContent;
      
      switch(cardTitle) {
        case 'Take Practice Test':
          showSection('test-selection');
          break;
        case 'View Study Plan':
          alert('Study plan feature coming soon!');
          break;
        case 'Assessment Results':
          alert('Assessment results feature coming soon!');
          break;
        case 'Progress Analytics':
          alert('Progress analytics feature coming soon!');
          break;
      }
    });
  });
  
  // Start test button
  document.querySelector('#test-selection .btn-primary').addEventListener('click', function() {
    startTest();
  });
  
  // Back to dashboard button
  const backButtons = document.querySelectorAll('.btn-outline');
  backButtons.forEach(button => {
    if (button.textContent.includes('Back to Dashboard')) {
      button.addEventListener('click', function() {
        // Confirm if in the middle of a test
        if (window.testData.startTime && !window.testData.endTime) {
          if (confirm('Are you sure you want to exit the test? Your progress will be lost.')) {
            resetTest();
            showSection('dashboard');
          }
        } else {
          showSection('dashboard');
        }
      });
    }
  });
  
  // Next question button
  setupNavigationButtons();
  
  // Submit test button
  const submitButton = document.querySelector('#test-session .btn-primary');
  if (submitButton) {
    submitButton.addEventListener('click', function() {
      if (confirm('Are you sure you want to submit your test?')) {
        finishTest();
        showSection('results');
      }
    });
  }
  
  // Take another test button
  const takeAnotherButton = document.querySelector('#results .btn-primary');
  if (takeAnotherButton) {
    takeAnotherButton.addEventListener('click', function() {
      resetTest();
      showSection('test-selection');
    });
  }
  
  // Flag question button
  const flagButton = document.querySelector('.btn-outline .fa-flag');
  if (flagButton) {
    flagButton.parentElement.addEventListener('click', function() {
      toggleFlagQuestion(window.testData.currentQuestion);
    });
  }
  
  // Skip question button
  const skipButton = document.querySelector('.btn-outline .fa-share');
  if (skipButton) {
    skipButton.parentElement.addEventListener('click', function() {
      goToNextQuestion();
    });
  }
  
  // Pause test button
  const pauseButton = document.querySelector('.btn-secondary .fa-pause');
  if (pauseButton) {
    pauseButton.parentElement.addEventListener('click', function() {
      pauseTest();
      showSection('test-selection');
    });
  }
}

// Navigation buttons setup
function setupNavigationButtons() {
  // Next button
  const nextButton = document.querySelector('.question-actions .btn-primary');
  if (nextButton) {
    nextButton.addEventListener('click', function() {
      goToNextQuestion();
    });
  }
  
  // Previous button (can be added if needed)
  // const prevButton = document.createElement('button');
  // prevButton.className = 'btn btn-outline';
  // prevButton.innerHTML = '<i class="fas fa-arrow-left"></i> Previous';
  // nextButton.parentElement.insertBefore(prevButton, nextButton);
  // prevButton.addEventListener('click', function() {
  //   goToPreviousQuestion();
  // });
}

// Start the test
function startTest() {
  // Reset test data
  window.testData.currentQuestion = 1;
  window.testData.answers = {};
  window.testData.startTime = new Date();
  window.testData.endTime = null;
  
  // Update UI
  updateTestSessionUI();
  
  // Set timer based on question count and subject
  setTestTimer();
  
  // Start timer if in timed mode
  if (window.testData.mode === 'timed') {
    startTimer();
  }
  
  // Load first question
  loadQuestion(1);
  
  // Show test session
  showSection('test-session');
}

// Set test timer
function setTestTimer() {
  // Calculate time based on question count and test type
  const questionTime = {
    'SAT': 1.25, // minutes per question
    'ACT': 0.85,
    'GRE': 1.5,
    'GMAT': 2,
    'LSAT': 1.4,
    'MCAT': 1.8
  };
  
  // Default to SAT timing if test type not found
  const timePerQuestion = questionTime[window.testData.testType] || 1.25;
  const totalMinutes = Math.ceil(window.testData.questionCount * timePerQuestion);
  
  window.testTimer.minutes = totalMinutes;
  window.testTimer.seconds = 0;
  
  // Update timer display
  updateTimerDisplay();
}

// Start the timer
function startTimer() {
  // Clear any existing interval
  if (window.testTimer.interval) {
    clearInterval(window.testTimer.interval);
  }
  
  window.testTimer.interval = setInterval(function() {
    if (window.testTimer.seconds === 0) {
      if (window.testTimer.minutes === 0) {
        // Time's up
        clearInterval(window.testTimer.interval);
        alert('Time is up! Your test will be submitted.');
        finishTest();
        showSection('results');
        return;
      }
      window.testTimer.minutes--;
      window.testTimer.seconds = 59;
    } else {
      window.testTimer.seconds--;
    }
    
    updateTimerDisplay();
  }, 1000);
}

// Update timer display
function updateTimerDisplay() {
  const timerElement = document.querySelector('.timer');
  if (timerElement) {
    const minutes = window.testTimer.minutes.toString().padStart(2, '0');
    const seconds = window.testTimer.seconds.toString().padStart(2, '0');
    timerElement.innerHTML = `<i class="fas fa-clock"></i> ${minutes}:${seconds}`;
  }
}

// Pause the test
function pauseTest() {
  if (window.testTimer.interval) {
    clearInterval(window.testTimer.interval);
    window.testTimer.paused = true;
  }
}

// Resume the test
function resumeTest() {
  if (window.testTimer.paused && window.testData.mode === 'timed') {
    startTimer();
    window.testTimer.paused = false;
  }
}

// Load a question
function loadQuestion(questionNumber) {
  // In a real app, this would fetch question data from a database
  // For this demo, we'll pretend to load questions
  
  window.testData.currentQuestion = questionNumber;
  
  // Update UI
  updateTestSessionUI();
  
  // Check if this question was already answered
  const answer = window.testData.answers[questionNumber];
  if (answer) {
    // Find and select the appropriate option
    const options = document.querySelectorAll('.answer-option');
    options.forEach(option => {
      option.classList.remove('selected');
      if (option.textContent.trim().charAt(0) === answer) {
        option.classList.add('selected');
      }
    });
  } else {
    // Deselect all options
    const options = document.querySelectorAll('.answer-option');
    options.forEach(option => option.classList.remove('selected'));
  }
  
  // TODO: Load actual question content
  // This would be replaced with real data in a production app
}

// Go to next question
function goToNextQuestion() {
  if (window.testData.currentQuestion < window.testData.questionCount) {
    loadQuestion(window.testData.currentQuestion + 1);
  } else {
    // On last question
    if (confirm('This is the last question. Would you like to submit your test?')) {
      finishTest();
      showSection('results');
    }
  }
}

// Go to previous question
function goToPreviousQuestion() {
  if (window.testData.currentQuestion > 1) {
    loadQuestion(window.testData.currentQuestion - 1);
  }
}

// Toggle flag on a question
function toggleFlagQuestion(questionNumber) {
  // In a real app, this would store the flag status
  // For this demo, we'll just toggle a visual indicator
  const flagButton = document.querySelector('.btn-outline .fa-flag').parentElement;
  flagButton.classList.toggle('btn-secondary');
  flagButton.classList.toggle('btn-outline');
  
  // Show toast notification
  showToast('Question ' + questionNumber + ' ' + 
    (flagButton.classList.contains('btn-secondary') ? 'flagged' : 'unflagged') + ' for review');
}

// Finish the test
function finishTest() {
  // Record end time
  window.testData.endTime = new Date();
  
  // Stop timer
  if (window.testTimer.interval) {
    clearInterval(window.testTimer.interval);
  }
  
  // Calculate time taken
  const timeTaken = Math.floor((window.testData.endTime - window.testData.startTime) / 1000); // in seconds
  const minutes = Math.floor(timeTaken / 60);
  const seconds = timeTaken % 60;
  
  // Calculate score (in a real app this would be based on correct answers)
  const answeredQuestions = Object.keys(window.testData.answers).length;
  const correctAnswers = Math.floor(answeredQuestions * 0.82); // Assuming 82% correct for demo
  const score = Math.round((correctAnswers / window.testData.questionCount) * 100);
  
  // Update results page
  updateResultsPage(score, minutes, seconds, correctAnswers);
}

// Update results page with score information
function updateResultsPage(score, minutes, seconds, correctAnswers) {
  // Update test info
  const testInfo = document.querySelector('.results-header p');
  if (testInfo) {
    const today = new Date();
    const dateString = today.toLocaleDateString('en-US', { month: '2-digit', day: '2-digit', year: 'numeric' });
    testInfo.textContent = `${window.testData.testType} ${window.testData.subject} Practice Test - ${dateString}`;
  }
  
  // Update score
  const scoreValue = document.querySelectorAll('.score-value')[0];
  if (scoreValue) {
    scoreValue.textContent = `${score}%`;
  }
  
  // Update time taken
  const timeValue = document.querySelectorAll('.score-value')[1];
  if (timeValue) {
    timeValue.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
  }
  
  // Update improvement (would be calculated from history in a real app)
  const improvementValue = document.querySelectorAll('.score-value')[2];
  if (improvementValue) {
    improvementValue.textContent = `+8%`; // Demo value
  }
  
  // Update correct count
  const correctCount = document.querySelector('.review-heading span');
  if (correctCount) {
    correctCount.textContent = `${correctAnswers}/${window.testData.questionCount} Correct`;
  }
  
  // In a real app, we would load actual question review information
}

// Reset test data
function resetTest() {
  window.testData = {
    currentQuestion: 1,
    totalQuestions: 20,
    answers: {},
    startTime: null,
    endTime: null,
    testType: 'SAT',
    subject: 'Reading',
    difficulty: 'Medium',
    mode: 'timed',
    questionCount: 20
  };
  
  if (window.testTimer.interval) {
    clearInterval(window.testTimer.interval);
  }
  
  window.testTimer = {
    minutes: 35,
    seconds: 0,
    interval: null,
    paused: false
  };
}

// Show section
function showSection(sectionId) {
  // Hide all sections
  document.getElementById('dashboard').style.display = 'none';
  document.getElementById('test-selection').style.display = 'none';
  document.getElementById('test-session').style.display = 'none';
  document.getElementById('results').style.display = 'none';
  
  // Show the selected section
  document.getElementById(sectionId).style.display = 'block';
  
  // Special handling for certain sections
  if (sectionId === 'test-session' && window.testTimer.paused) {
    resumeTest();
  }
}

// Show toast notification
function showToast(message) {
  // Create toast element if it doesn't exist
  let toast = document.querySelector('.toast-notification');
  if (!toast) {
    toast = document.createElement('div');
    toast.className = 'toast-notification';
    document.body.appendChild(toast);
    
    // Add some basic styling
    toast.style.position = 'fixed';
    toast.style.bottom = '20px';
    toast.style.right = '20px';
    toast.style.backgroundColor = 'var(--secondary)';
    toast.style.color = 'white';
    toast.style.padding = '10px 20px';
    toast.style.borderRadius = '5px';
    toast.style.zIndex = '1000';
    toast.style.transition = 'opacity 0.5s';
    toast.style.opacity = '0';
  }
  
  // Set message and show
  toast.textContent = message;
  toast.style.opacity = '1';
  
  // Hide after 3 seconds
  setTimeout(() => {
    toast.style.opacity = '0';
  }, 3000);
}
</script>
</body></html>